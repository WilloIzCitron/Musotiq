const Discord = require('discord.js');

module.exports.run = async (bot, message, args, color, distube) => {

    const nopermsoof = new Discord.MessageEmbed()
    .setTitle("Musotiq Sent an error!")
    .setDescription("You dont have any permision to use this command!")
    .setFooter("you need the MANAGE_SERVER permision, thats why bud")
    .setColor("#ff0000")
    const wrongusage = new Discord.MessageEmbed()
    .setTitle("Musotiq Sent an error")
    .setDescription("Wrong usage! type ``M!prefix **perfix you want**``")
    .setColor("#ff0000")

    
    if (!message.member.hasPermision("MANAGE_SERVER")) return message.reply(nopermsoof);
    if(!args[0] || args[0 === "help"]) return message.reply(wrongusage);

    let prefixes = JSON.parse(fs.readFileSync(".prefixes.json",));

    prefixes[message.guild.id] = {
        prefixes: args[0]
    };

    fs.writeFile("./prefixes.json", JSON.stringify(prefixes), (err) =>{
        if (err) console.log(err)
    });

    let sEmbed = new Discord.MessageEmbed()
    .setColor(color)
    .setTitle("Prefix Set!")
    .setDescription(`set to ${args[0]}`)

    message.channel.send(sEmbed);
}

module.exports.config = {
  name: "prefix",
  description: "This command will allow you to change the prefix for the server or guild if the member has the manage server permision",
  aliases: []
}